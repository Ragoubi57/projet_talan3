# Pipeline configuration
pipeline:
  max_rows: 500000
  date_range:
    start: "2023-01-01"
    end: "2023-06-30"
  synthetic_fallback: true

ingestion:
  kaggle_dataset: "elemento/nyc-yellow-taxi-trip-data"
  sample_fraction: 0.1

quality:
  null_threshold: 0.05
  outlier_iqr_factor: 3.0
  min_passenger: 1
  max_passenger: 6
  max_fare: 500.0
  max_distance: 200.0
  max_duration_hours: 12

repair:
  targeted_repair_budget: 0.3  # repair up to 30% of flagged rows
  strategies:
    - swap_datetime
    - clamp_passenger
    - abs_distance
    - winsorize_fare
    - drop_zero_duration

forecasting:
  target: demand
  time_grain: hour  # hour or day
  horizons: [1, 6, 24]
  metrics: [mae, rmse, smape]
  test_fraction: 0.2

clustering:
  algorithms: [kmeans]
  n_clusters: 5
  features:
    - trip_distance
    - fare_amount
    - duration_minutes
    - hour_of_day
    - day_of_week

mlflow:
  tracking_uri: http://mlflow:5000
  experiment_name: nyc_taxi_forecast
  fallback_to_json: true

monitoring:
  drift_method: psi  # psi or ks
  psi_threshold: 0.2
  ks_threshold: 0.05
  retrain_trigger: true

llm:
  enabled: false
  auto_apply_llm_suggestions: false
  provider: stub
